{% extends "cartoview/base.html" %}
{% block title %}
    {{ block.super }} - {{ instance.title }}
{% endblock %}
{% block styles %}
    <link rel="stylesheet" href="{{ STATIC_URL }}vendor/ol3/ol.css">
    <link rel="stylesheet" href="{{ STATIC_URL }}cartoview_map_viewer/css/map.css">
    <link rel="stylesheet" href="{{ STATIC_URL }}cartoview_map_viewer/css/style.css">
    {% for w in widgets %}
        {% for css_url in w.view.css %}
            <link rel="stylesheet" href="{{ css_url }}">{% endfor %}
    {% endfor %}
{% endblock %}
{% block scripts %}
    <script type="text/javascript" src="{{ STATIC_URL }}vendor/ol3/ol.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/proj4js/2.3.14/proj4.js"></script>

    {% include "cartoview_map_viewer/dynamic_view_js.html" %}
    <script type="text/javascript" src="{{ STATIC_URL }}cartoview_map_viewer/js/view/app.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}cartoview_map_viewer/js/view/map-service.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}cartoview_map_viewer/js/view/map-directive.js"></script>
    <script type="text/javascript"
            src="{{ STATIC_URL }}cartoview_map_viewer/js/view/basic-controls-directives.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}cartoview_map_viewer/js/view/identify-service.js"></script>
    <!--<script type="text/javascript"
            src="{{ STATIC_URL }}cartoview_map_viewer/js/view/identify-results-directive.js"></script>-->
    <script type="text/javascript" src="{{ STATIC_URL }}cartoview_map_viewer/js/view/widget-view-directive.js"></script>
    {% for w in widgets %}
        {% for js_url in w.view.js %}
            <script type="text/javascript" src="{{ js_url }}"></script>{% endfor %}
    {% endfor %}
{% endblock %}
{% block body_directives %}ng-app="cartoview.featureListApp"
    ng-controller="cartoview.featureListApp.MainController"{% endblock %}
{% block header_toolbar %}{% endblock %}
{% block body %}
    <div class="content-panel" layout="column" ng-class="{'md-whiteframe-1dp has-content': identify.hasContent}">
        <md-content class="header" layout="row">
            <md-button ng-click="toggleSidenav()" class="md-primary" ng-class="{'md-fab': !identify.hasContent}">
                <md-icon aria-label="Menu" class="material-icons">menu</md-icon>
            </md-button>
            <span flex></span>
            <md-button ng-click="identify.clearContent()" class="md-primary" ng-show="identify.hasContent">
                <md-icon aria-label="Menu" class="material-icons">close</md-icon>
            </md-button>
        </md-content>
        <md-content flex ng-show="identify.hasContent" class="content">
            <identify-results></identify-results>
        </md-content>


    </div>
    {% verbatim %}
    <md-sidenav class="md-sidenav-right md-whiteframe-4dp" md-is-open="sideRight" md-component-id="right">
        <md-content flex class="content">
            <feature-list ng-show="!identify.hasContent && !collectorService.form.visible"></feature-list>
            <!--<identify-results ng-show="identify.hasContent && !collectorService.form.visible"></identify-results>-->
            <collector-add-item-form ng-show="collectorService.form.visible"></collector-add-item-form>
        </md-content>

    </md-sidenav>
    {% endverbatim %}
    <div class="full-height" layout-align="space-around stretch" layout="row" layout-sm="column" layout-xs="column">
        <!--<div flex-gt-sm="30" class="md-whiteframe-1dp feature-list-ct" layout="column">
            <md-content class="header" layout="row">
                <md-button ng-click="toggleSidenav()" class="md-primary">
                    <md-icon aria-label="Menu" class="material-icons">menu</md-icon>
                </md-button>
                <span flex></span>
                <md-button ng-click="identify.clearContent()" class="md-primary" ng-show="identify.hasContent">
                    <md-icon aria-label="Menu" class="material-icons">close</md-icon>
                </md-button>
            </md-content>
            <md-content flex class="content">
                <feature-list ng-show="!identify.hasContent"></feature-list>
                <identify-results ng-show="identify.hasContent"></identify-results>
            </md-content>
        </div>-->
        <div flex cartoview-map style="position: relative;">
            <zoom-bar ng-if="config.showZoombar"></zoom-bar>
        </div>
    </div>
    <md-sidenav md-component-id="left" class="md-sidenav-left md-whiteframe-z2 floating-menu">
        {% verbatim %}
        <md-toolbar>
            <div class="md-toolbar-tools">
                <h2>{{ config.title }}</h2>
            </div>
        </md-toolbar>
        <md-button class="md-list-item-content" ng-click="map.zoomHome()">
            <md-icon class="material-icons floating-menu-item-icon">home</md-icon>
            <span class="md-inline-list-icon-label">Home</span>
        </md-button>
        <md-button about-button class="md-list-item-content">
            <md-icon class="material-icons floating-menu-item-icon">help</md-icon>
            <span class="md-inline-list-icon-label">About</span>
        </md-button>
        <div ng-if="config.showLayerSwitcher">
            <toggle-button toggle="layersSwitcherVisible" title="Layers" icon="layers"></toggle-button>
            <layers-switcher ng-show="layersSwitcherVisible"></layers-switcher>
        </div>
        <div ng-if="config.showLegend">
            <toggle-button toggle="legendVisible" title="Legend" icon="view_list"></toggle-button>
            <layers-legend ng-show="legendVisible"></layers-legend>
        </div>
        <div ng-if="config.showBasemapSwitcher">
            <toggle-button toggle="baseMapsSwitcherVisible" title="Base Maps" icon="satellite"></toggle-button>
            <basemaps-switcher ng-show="baseMapsSwitcherVisible"></basemaps-switcher>
        </div>
        <md-button class="md-list-item-content" ng-click="isOpenRight()">
            <md-icon class="material-icons floating-menu-item-icon">list</md-icon>
            <span class="md-inline-list-icon-label">List All Features</span>
        </md-button>
        {% endverbatim %}
    </md-sidenav>
    {% verbatim %}
    <md-sidenav class="md-sidenav-right md-whiteframe-4dp" md-is-open="sideRight" md-component-id="right">
        <md-content flex class="content">
            <feature-list ng-show="!identify.hasContent && !collectorService.form.visible"></feature-list>
            <!--<identify-results ng-show="identify.hasContent && !collectorService.form.visible"></identify-results>
            <collector-add-item-form ng-show="collectorService.form.visible"></collector-add-item-form>-->
        </md-content>

    </md-sidenav>
    {% endverbatim %}

{% endblock %}
