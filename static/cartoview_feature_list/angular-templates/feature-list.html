<md-content class="map-results">
    <div ng-repeat="result in featureList.content.results">
        <md-list ng-show="!featureList.selected">
            <md-list-item class="map-results-header"><h4>{{ result.title }}</h4></md-list-item>
            <md-divider></md-divider>
            <md-list-item
                    ng-repeat="feature in result.features" aria-label="{{ featue }}"
                    ng-click="featureList.selectFeature(feature)">
                <p dynamic-template template="result.itemTpl" feature="feature"></p>
                <md-divider ng-if="!$last"></md-divider>
            </md-list-item>
        </md-list>
    </div>
    <div ng-if="featureList.selected">
        <div layout="row">
            <div flex style="text-align: center;">
                <md-button class="md-icon-button" ng-click="featureList.selectFeature()" aria-label="Close">
                    <md-icon class="material-icons">arrow_back</md-icon>
                </md-button>
            </div>
        </div>
        <md-divider></md-divider>

        <cartoview-images ng-if="featureList.selected"
                          identifier="{{ getIdentifier() }}"></cartoview-images>
        <md-divider></md-divider>
        <div dynamic-template template="featureList.selected.result.detailsTpl" feature="featureList.selected"></div>
        <cartoview-comments ng-if="featureList.selected"
                            identifier="{{ getIdentifier() }}"></cartoview-comments>
    </div>
</md-content>

